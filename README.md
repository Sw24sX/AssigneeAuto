# Сервис автоматического назначения ревьюверов Assignee Auto

## Интеграция с GitLab

### Создание токена для подключения к api GitLab:

Перходим в настройки (Settings > Access Tokens). 
Для работы сервиса необходим scope `api` (т.к. помимо получение информации будет назначение assignee).

### Пробрасывание Webhooks

В каждом подключаемом проекте необходимо добавить адрес отправки событий. 
В настройках проекта (Settings > Webhooks):
- url: `<url-сервера>/gitlab/event/merge-request`
- Поставить триггер на `Merge request event`

## Описание реализованных правил

### Принцип работы правил

Каждое правило из блока `choose.part` оценивает каждого из потенциальных ревьюверов в диапазоне от 0 до 100. По итогу работы, на merge request назначается 
ревьювер с наибольшим суммарным количеством баллов.

Каждое правило из блока `exclude.part` исключает из списка потенциальных ревьюверов по заложенным правилам

### Список правил
- `number-changes-merge-request-files`: подсчитывает количество строк, который потенциальный ревьювер редактировал ранее в каждом из изменяемых в mr файлах
- `minimize-count-review`: отдает предпочтение ревьюверу с наименьшимколичеством ревью
- `max-merge-request-per-reviewer`: исключает ревьюверов, на которых уже назначено максимальное количество merge request (число регулируется для каждого ревьювера отдельно)
- `review-task-branch`: исключает всех авторов, кроме ревьювера, который уже проводил ревью для mr с тем же названием и из той же ветки
- `exclude-author`: исключает автора merge request из списка потенциальных ревьюверов